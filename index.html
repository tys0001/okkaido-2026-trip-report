import React, { useState, useEffect } from 'react';
import { 
  MapPin, 
  Calendar, 
  Clock, 
  Navigation, 
  Phone, 
  Coffee, 
  Utensils, 
  BedDouble, 
  AlertTriangle, 
  Snowflake, 
  Camera, 
  Car, 
  ShoppingBag,
  CreditCard,
  Copy,
  ChevronRight,
  X,
  Languages
} from 'lucide-react';

/**
 * 2026 åŒ—æµ·é“å†¬ä¹‹è¦ªå­å¤§ç¸±èµ° - æ¥µè‡´è¯éº—è¡Œå‹•ç‰ˆ
 * Designed for Mobile Experience
 */

// --- Data & Configuration ---

const tripData = {
  meta: {
    title: "2026 åŒ—æµ·é“å†¬ä¹‹è¦ªå­å¤§ç¸±èµ°",
    dateRange: "JAN 30 - FEB 04",
    members: "4 å¤§äºº 3 å°å­©"
  },
  days: [
    {
      id: 1,
      date: "01/30 (äº”)",
      title: "åˆæŠµåŒ—åœ‹",
      highlight: "æŠµé”æœ­å¹Œ âœ æ¹¯å’–å“©",
      weather: "â„ï¸ -5Â°C",
      schedule: [
        { time: "18:30", title: "æŠµé”æ–°åƒæ­²æ©Ÿå ´ (CTS)", type: "flight", note: "å…¥å¢ƒé ˜è¡Œæç´„ 1 å°æ™‚" },
        { time: "19:30", title: "JR å¿«é€Ÿæ©Ÿå ´ç·š", type: "transport", note: "å¾€æœ­å¹Œç«™ (37åˆ†é˜)ï¼Œå†è½‰åœ°éµè‡³å¤§é€šç«™" },
        { time: "20:30", title: "æœ­å¹Œä¸‰ä½ç¥å¤§é£¯åº— Check-in", type: "hotel", mapCode: "9 522 473*22", address: "æœ­å¹Œå¸‚ä¸­å¤®å€å¤§é€šè¥¿ 5-3" },
        { time: "21:00", title: "æ™šé¤ï¼šSuage+ æ¹¯å’–å“©", type: "food", note: "æˆ–åƒæ‹‰éºµæ©«ä¸ (ç‡Ÿæ¥­è‡³æ·±å¤œ)" },
        { time: "22:00", title: "ä¾¿åˆ©å•†åº—è£œçµ¦", type: "shop", note: "Seicomart è²·ç‚¸é›ã€æ˜å¤©æ—©é¤" }
      ]
    },
    {
      id: 2,
      date: "01/31 (å…­)",
      title: "ç¥å®®èˆ‡åŒ—æ¥µç†Š",
      highlight: "åœ“å±±å‹•ç‰©åœ’ âœ é å®šæ™šé¤",
      weather: "ğŸŒ¤ï¸ -4Â°C",
      schedule: [
        { time: "09:00", title: "åŒ—æµ·é“ç¥å®®", type: "spot", mapCode: "9 487 312*22", note: "å¿…åƒï¼šå…­èŠ±äº­ç¥å®®èŒ¶å±‹ã€Œåˆ¤å®˜é¤…ã€" },
        { time: "11:30", title: "åˆé¤ï¼šåœ“å±±å‘¨é‚Š", type: "food", note: "æ¨è–¦ The Village Store (æ¼¢å ¡) æˆ– Toriton å£½å¸" },
        { time: "13:00", title: "åœ“å±±å‹•ç‰©åœ’", type: "activity", note: "âš ï¸ 15:30 æœ€å¾Œå…¥åœ’ï¼å¿…çœ‹åŒ—æ¥µç†Šé¤¨ã€å®¤å…§æºœæ»‘æ¢¯" },
        { time: "18:00", title: "æ™šé¤ [å·²é å®š]", type: "food", important: true, note: "è«‹æº–æ™‚æŠµé”é¤å»³" }
      ]
    },
    {
      id: 3,
      date: "02/01 (æ—¥)",
      title: "è‡ªé§•å•Ÿç¨‹",
      highlight: "éˆ´è˜­å…¬åœ’é›ªèƒ âœ æ£®ä¹‹ç©ºåº­",
      weather: "â„ï¸ -6Â°C",
      schedule: [
        { time: "09:00", title: "ç§Ÿè»Šå–è»Š", type: "transport", important: true, note: "æª¢æŸ¥é›ªèƒã€ETCå¡ã€‚å°èˆªè¨­ MapCode" },
        { time: "10:30", title: "ç€§é‡éˆ´è˜­ä¸˜é™µå…¬åœ’", type: "activity", mapCode: "9 016 083*14", note: "å…è²»é›ªèƒç©åˆ°çˆ½ï¼åˆé¤åœ¨åœ’å…§åƒ" },
        { time: "15:30", title: "æ”¯ç¬æ¹–å†°æ¿¤ç¥­", type: "spot", mapCode: "867 063 446*44", note: "å…ˆçœ‹ç™½å¤©è—è‰² âœ 16:30 ç­‰é»ç‡ˆã€‚æ¥µå†·æ³¨æ„ä¿æš–" },
        { time: "18:30", title: "å…¥ä½ï¼šæ£®ä¹‹ç©ºåº­", type: "hotel", mapCode: "421 829 095*44", address: "ä¼Šé”å¸‚å¤§æ»å€åŒ—æ¹¯æ¾¤æº«æ³‰ç”º300-7", note: "æ‹¿å‡ºæ³³è¡£ï¼ç©å®¤å…§æº«æ³‰æµ·ç˜ Tokotoko" }
      ]
    },
    {
      id: 4,
      date: "02/02 (ä¸€)",
      title: "ç†Šèˆ‡ä¼éµ",
      highlight: "å°¼å…‹æ–¯ âœ æ´çˆºæ¹–è£œçµ¦",
      weather: "â˜ï¸ -3Â°C",
      schedule: [
        { time: "09:30", title: "ç™»åˆ¥å°¼å…‹æ–¯æµ·æ´‹å…¬åœ’", type: "activity", mapCode: "603 142 355*52", note: "ä¼éµéŠè¡Œï¼š11:00 / 14:15" },
        { time: "13:30", title: "æ˜­å’Œæ–°å±±ç†Šç‰§å ´", type: "spot", mapCode: "321 433 346*33", note: "è²·è˜‹æœé¤…ä¹¾é¤µç†Šï¼Œæ¯”ç™»åˆ¥è¿‘ä¸”äº’å‹•å¤š" },
        { time: "15:30", title: "æ´çˆºæ¹–æº«æ³‰è¡— (ç”Ÿå­˜è£œçµ¦)", type: "warning", important: true, note: "âš ï¸ é£¯åº—é™„è¿‘ç„¡å•†åº—ï¼è«‹åœ¨æ­¤åƒæ™šé¤+è²·æ˜å¤©æ—©é¤" },
        { time: "18:00", title: "å…¥ä½ï¼šå¯å¯é£¯åº—", type: "hotel", mapCode: "321 519 556*74", address: "æ´çˆºæ¹–ç”ºæœˆæµ¦ 102-18", note: "ä½æ–¼æ¹–è¥¿å´é«˜åœ°ï¼Œç„¡æ—©é¤ï¼Œå®‰éœè³æ™¯" }
      ]
    },
    {
      id: 5,
      date: "02/03 (äºŒ)",
      title: "é›ªç¥­å‰å¤œ",
      highlight: "F Village âœ æœ­å¹Œé›ªç¥­è©¦ç‡ˆ",
      weather: "ğŸŒ¤ï¸ -2Â°C",
      schedule: [
        { time: "11:30", title: "F Village æ£’çƒåœ’å€", type: "spot", note: "æœå°‹ 'Es Con Field'ã€‚è¶…å¤§å¨›æ¨‚åŸã€å…’ç«¥éŠæˆ²å€" },
        { time: "14:00", title: "ä¸‰äº• Outlet åŒ—å»£å³¶", type: "shop", mapCode: "9 050 376*55", note: "å®¤å…§è³¼ç‰©å¥½å»è™•ï¼ŒNike/Mont-bell" },
        { time: "17:30", title: "æœ­å¹Œé‚„è»Š", type: "transport", note: "å»ºè­°åœ¨æœ­å¹Œç«™é™„è¿‘é‚„è»Šï¼Œçœåœè»Šè²»" },
        { time: "18:30", title: "å…¥ä½ï¼šæ ¼æ‹‰æ–¯éº—æœ­å¹Œ", type: "hotel", address: "æœ­å¹Œå¸‚ä¸­å¤®å€åŒ—4æ¢è¥¿4ä¸ç›®1", note: "æœ­å¹Œç«™å—å£å°é¢ï¼Œæœ‰åœ°ä¸‹é€£é€šé“" },
        { time: "19:30", title: "é›ªç¥­å‰å¤œç¥­ (å¤§é€šå…¬åœ’)", type: "camera", note: "é€šå¸¸ä»Šæ™šæœƒè©¦ç‡ˆï¼Œäººå°‘å¥½æ‹ç…§ï¼" }
      ]
    },
    {
      id: 6,
      date: "02/04 (ä¸‰)",
      title: "æ»¿è¼‰è€Œæ­¸",
      highlight: "æ©Ÿå ´æ¡è²· âœ å›å®¶",
      weather: "âœˆï¸ è¿”ç¨‹",
      schedule: [
        { time: "Morning", title: "å‰å¾€æ–°åƒæ­²æ©Ÿå ´", type: "transport", note: "æ­ JR å¿«é€Ÿæ©Ÿå ´ç·š (å…å¡è»Š)" },
        { time: "10:00", title: "æ©Ÿå ´æœ€å¾Œè¡åˆº", type: "shop", note: "âš ï¸ å“†å•¦Aå¤¢å·²æ­‡æ¥­ã€‚æ”¹å» Royce' World / Hello Kitty" },
        { time: "Lunch", title: "åŒ—æµ·é“æ‹‰éºµé“å ´", type: "food", note: "æ¨è–¦ã€Œä¸€å¹»ã€è¦å‘³æ‹‰éºµ" },
        { time: "Flight", title: "æ­æ©Ÿè¿”å®¶", type: "flight", note: "TPE æº«æš–çš„å®¶" }
      ]
    }
  ],
  hotels: [
    { name: "æœ­å¹Œä¸‰ä½ç¥å¤§é£¯åº—", days: "1/30 - 2/01", tags: ["å¤§é€šå…¬åœ’", "å¤§æµ´å ´"], address: "æœ­å¹Œå¸‚ä¸­å¤®å€å¤§é€šè¥¿5-3", mapCode: "9 522 473*22" },
    { name: "åŒ—æ¹¯æ¾¤ æ£®ä¹‹ç©ºåº­", days: "2/01 - 2/02", tags: ["è¦ªå­å¿…ä½", "æº«æ³‰æµ·ç˜"], address: "ä¼Šé”å¸‚å¤§æ»å€åŒ—æ¹¯æ¾¤æº«æ³‰ç”º300-7", mapCode: "421 829 095*44" },
    { name: "å¯å¯é£¯åº— (Hotel Cocoa)", days: "2/02 - 2/03", tags: ["âš ï¸ç„¡æ—©é¤", "æ¹–æ™¯"], address: "æ´çˆºæ¹–ç”ºæœˆæµ¦ 102-18", mapCode: "321 519 556*74" },
    { name: "æ ¼æ‹‰æ–¯éº—æœ­å¹Œé…’åº—", days: "2/03 - 2/04", tags: ["è»Šç«™ç›´çµ", "äº¤é€šç¥"], address: "æœ­å¹Œå¸‚ä¸­å¤®å€åŒ—4æ¢è¥¿4ä¸ç›®1", mapCode: "9 522 660*88" }
  ],
  translations: [
    { jap: "äºˆç´„ãŒã‚ã‚Šã¾ã™", chi: "æˆ‘æœ‰é ç´„" },
    { jap: "æº€ã‚¿ãƒ³ã§ãŠé¡˜ã„ã—ã¾ã™", chi: "è«‹åŠ æ»¿æ²¹ (Regular)" },
    { jap: "å­ä¾›ç”¨ã®æ¤…å­ã¯ã‚ã‚Šã¾ã™ã‹", chi: "æœ‰å…’ç«¥æ¤…å—ï¼Ÿ" },
    { jap: "ãŠä¼šè¨ˆã‚’ãŠé¡˜ã„ã—ã¾ã™", chi: "éº»ç…©çµå¸³" },
    { jap: "é ˜åæ›¸ã‚’ãã ã•ã„", chi: "è«‹çµ¦æˆ‘æ”¶æ“š" }
  ]
};

// --- Components ---

const GlassCard = ({ children, className = "", onClick }: any) => (
  <div 
    onClick={onClick}
    className={`backdrop-blur-md bg-white/80 border border-white/40 shadow-lg rounded-2xl p-5 transition-all duration-300 ${onClick ? 'active:scale-95 active:bg-white/90' : ''} ${className}`}
  >
    {children}
  </div>
);

const IconButton = ({ icon: Icon, label, onClick, color = "text-blue-600" }: any) => (
  <button 
    onClick={onClick}
    className="flex flex-col items-center justify-center space-y-1 w-full"
  >
    <div className={`p-3 rounded-full bg-white shadow-md ${color} active:bg-gray-100 transition-colors`}>
      <Icon size={24} />
    </div>
    <span className="text-[10px] font-medium text-gray-500">{label}</span>
  </button>
);

const Tag = ({ text, color = "bg-blue-100 text-blue-800" }: any) => (
  <span className={`px-2 py-1 rounded-md text-xs font-bold ${color} mr-2`}>
    {text}
  </span>
);

const copyToClipboard = (text: string) => {
  navigator.clipboard.writeText(text);
  alert(`å·²è¤‡è£½ MapCode: ${text}`);
};

const openMap = (query: string) => {
  window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
};

export default function HokkaidoTripApp() {
  const [activeTab, setActiveTab] = useState('itinerary');
  const [selectedDay, setSelectedDay] = useState(1);
  const [showModal, setShowModal] = useState(false);
  const [modalContent, setModalContent] = useState<any>(null);

  const currentDay = tripData.days.find(d => d.id === selectedDay);

  const handleOpenInfo = (item: any) => {
    if (item.mapCode || item.address || item.note) {
      setModalContent(item);
      setShowModal(true);
    }
  };

  return (
    <div className="min-h-screen bg-slate-100 font-sans pb-24 relative overflow-hidden text-gray-800">
      
      {/* Decorative Background Elements */}
      <div className="fixed top-0 left-0 w-full h-80 bg-gradient-to-b from-blue-400 to-blue-100 rounded-b-[3rem] shadow-xl z-0"></div>
      <div className="fixed -top-10 -right-10 text-white/20 animate-pulse">
        <Snowflake size={200} />
      </div>

      {/* Header */}
      <div className="relative z-10 px-6 pt-12 pb-4 text-white">
        <div className="flex justify-between items-start">
          <div>
            <h3 className="text-sm font-medium opacity-90 tracking-widest mb-1">{tripData.meta.dateRange}</h3>
            <h1 className="text-2xl font-extrabold leading-tight shadow-black drop-shadow-md">
              åŒ—æµ·é“<br />å†¬ä¹‹è¦ªå­å¤§ç¸±èµ°
            </h1>
          </div>
          <div className="bg-white/20 backdrop-blur-sm p-2 rounded-lg border border-white/30">
            <Snowflake size={24} className="animate-spin-slow" />
          </div>
        </div>
        <div className="mt-4 flex space-x-2 overflow-x-auto hide-scrollbar pb-2">
          {tripData.days.map((day) => (
            <button
              key={day.id}
              onClick={() => setSelectedDay(day.id)}
              className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all shadow-md ${
                selectedDay === day.id 
                  ? 'bg-white text-blue-600 scale-105 ring-2 ring-blue-300' 
                  : 'bg-blue-500/50 text-white hover:bg-blue-500/70'
              }`}
            >
              {day.date.split(' ')[0]}
            </button>
          ))}
        </div>
      </div>

      {/* Main Content Area */}
      <div className="relative z-10 px-4 mt-2 space-y-4 animate-fade-in-up">
        
        {/* Day Summary Card */}
        {activeTab === 'itinerary' && currentDay && (
          <>
            <GlassCard className="mb-4 !bg-blue-600/5 !border-blue-200">
              <div className="flex justify-between items-center mb-2">
                <h2 className="text-xl font-bold text-gray-800">{currentDay.title}</h2>
                <span className="text-blue-600 font-bold bg-blue-100 px-2 py-1 rounded text-xs">
                  {currentDay.weather}
                </span>
              </div>
              <p className="text-sm text-gray-600 font-medium mb-3">
                ä»Šæ—¥äº®é»ï¼š{currentDay.highlight}
              </p>
            </GlassCard>

            <div className="space-y-3">
              {currentDay.schedule.map((item, idx) => (
                <div 
                  key={idx} 
                  onClick={() => handleOpenInfo(item)}
                  className="flex group"
                >
                  <div className="flex flex-col items-center mr-3 pt-1">
                    <div className={`w-3 h-3 rounded-full ${item.important ? 'bg-red-500 animate-pulse' : 'bg-blue-400'} ring-4 ring-white shadow-sm`}></div>
                    <div className="w-0.5 h-full bg-blue-100 my-1 rounded-full group-last:bg-transparent"></div>
                  </div>
                  <GlassCard className={`flex-1 !p-4 mb-2 flex justify-between items-start ${item.important ? '!bg-red-50 !border-red-200' : ''}`} onClick={() => handleOpenInfo(item)}>
                    <div>
                      <div className="flex items-center mb-1">
                        <span className="text-xs font-bold text-gray-400 w-10">{item.time}</span>
                        <h4 className={`font-bold text-sm ${item.important ? 'text-red-700' : 'text-gray-800'}`}>
                          {item.title}
                        </h4>
                      </div>
                      {item.note && (
                        <p className="text-xs text-gray-500 mt-1 pl-10 leading-relaxed">
                          {item.note}
                        </p>
                      )}
                      {(item.mapCode || item.address) && (
                        <div className="mt-2 pl-10 flex gap-2">
                          <span className="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded flex items-center">
                            <Navigation size={10} className="mr-1" /> é»æ“Šå°èˆª
                          </span>
                        </div>
                      )}
                    </div>
                    <div className="text-gray-300">
                       {getIcon(item.type)}
                    </div>
                  </GlassCard>
                </div>
              ))}
            </div>
          </>
        )}

        {/* Hotels View */}
        {activeTab === 'hotels' && (
          <div className="space-y-4 pb-4">
             <h2 className="text-lg font-bold text-gray-800 px-2">ä½å®¿ç¸½è¦½</h2>
             {tripData.hotels.map((hotel, idx) => (
               <GlassCard key={idx}>
                 <div className="flex justify-between items-start">
                   <div>
                     <span className="text-xs font-bold text-blue-500 tracking-wider mb-1 block">{hotel.days}</span>
                     <h3 className="text-lg font-bold text-gray-800 mb-1">{hotel.name}</h3>
                     <div className="flex flex-wrap gap-1 mb-3">
                       {hotel.tags.map(tag => (
                         <span key={tag} className={`text-[10px] px-2 py-0.5 rounded ${tag.includes('âš ï¸') ? 'bg-red-100 text-red-700' : 'bg-gray-100 text-gray-600'}`}>
                           {tag}
                         </span>
                       ))}
                     </div>
                     <p className="text-xs text-gray-500 flex items-center mb-3">
                       <MapPin size={12} className="mr-1" /> {hotel.address}
                     </p>
                   </div>
                 </div>
                 <div className="grid grid-cols-2 gap-3 mt-2">
                    <button 
                      onClick={() => openMap(hotel.address)}
                      className="bg-blue-600 text-white text-xs font-bold py-2 rounded-lg shadow-lg active:scale-95 transition-transform flex items-center justify-center"
                    >
                      <Navigation size={14} className="mr-1" /> å°èˆª
                    </button>
                    <button 
                      onClick={() => copyToClipboard(hotel.mapCode)}
                      className="bg-white border border-gray-200 text-gray-700 text-xs font-bold py-2 rounded-lg shadow-sm active:scale-95 transition-transform flex items-center justify-center"
                    >
                      <Copy size={14} className="mr-1" /> è¤‡è£½ MapCode
                    </button>
                 </div>
               </GlassCard>
             ))}
          </div>
        )}

        {/* Tools View */}
        {activeTab === 'tools' && (
          <div className="space-y-4">
             <h2 className="text-lg font-bold text-gray-800 px-2">å¯¦ç”¨å·¥å…·</h2>
             
             <GlassCard>
               <h3 className="font-bold text-gray-800 mb-3 flex items-center">
                 <Languages size={18} className="mr-2 text-blue-600" /> 
                 æ±‚ç”Ÿæ‰‹æŒ‡æ—¥èª
               </h3>
               <div className="space-y-2">
                 {tripData.translations.map((t, idx) => (
                   <div key={idx} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg active:bg-blue-50" onClick={() => {
                     // In a real app, maybe play sound
                   }}>
                     <div>
                       <div className="text-lg font-bold text-gray-800">{t.jap}</div>
                       <div className="text-xs text-gray-500">{t.chi}</div>
                     </div>
                   </div>
                 ))}
               </div>
             </GlassCard>

             <GlassCard className="!bg-red-50 !border-red-100">
               <h3 className="font-bold text-red-800 mb-2 flex items-center">
                 <AlertTriangle size={18} className="mr-2" /> 
                 é‡è¦æé†’
               </h3>
               <ul className="list-disc list-inside text-sm text-red-700 space-y-1">
                 <li><strong>2/2 æ´çˆºæ¹–ä½å®¿ï¼š</strong>é™„è¿‘æ²’æ—©é¤ã€æ²’è¶…å•†ã€‚å‹™å¿…å…ˆè²·å¥½ç³§é£Ÿï¼</li>
                 <li><strong>ç§Ÿè»ŠåŠ æ²¹ï¼š</strong>é‚„è»Šå‰è«‹æ‰¾ã€ŒRegular (ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼)ã€ç´…è‰²çš„æ²¹æ§åŠ æ»¿ã€‚</li>
                 <li><strong>é›ªåœ°é§•é§›ï¼š</strong>çœ‹åˆ°ã€Œåœæ­¢ã€æ¨™èªŒä¸€å®šè¦å®Œå…¨åœä¸‹ã€‚</li>
               </ul>
             </GlassCard>
          </div>
        )}
      </div>

      {/* Detail Modal */}
      {showModal && modalContent && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in">
          <div className="bg-white rounded-3xl w-full max-w-sm shadow-2xl p-6 relative">
            <button 
              onClick={() => setShowModal(false)}
              className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2"
            >
              <X size={24} />
            </button>
            
            <div className="flex flex-col items-center mb-6">
              <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-3">
                {getIcon(modalContent.type, 24)}
              </div>
              <h3 className="text-xl font-bold text-center text-gray-800">{modalContent.title}</h3>
              {modalContent.time && (
                 <span className="text-sm font-bold text-gray-500 mt-1">{modalContent.time}</span>
              )}
            </div>

            {modalContent.note && (
              <div className="bg-gray-50 p-4 rounded-xl text-sm text-gray-600 mb-6 leading-relaxed">
                {modalContent.note}
              </div>
            )}

            <div className="space-y-3">
              {modalContent.mapCode && (
                <button 
                  onClick={() => copyToClipboard(modalContent.mapCode)}
                  className="w-full bg-gray-800 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-transform flex items-center justify-center"
                >
                  <Copy size={16} className="mr-2" /> 
                  MapCode: {modalContent.mapCode}
                </button>
              )}
              {(modalContent.address || modalContent.mapCode) && (
                <button 
                  onClick={() => openMap(modalContent.address || `MapCode ${modalContent.mapCode}`)}
                  className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition-transform flex items-center justify-center"
                >
                  <Navigation size={16} className="mr-2" /> 
                  é–‹å•Ÿ Google Maps
                </button>
              )}
            </div>
          </div>
        </div>
      )}

      {/* Bottom Navigation */}
      <div className="fixed bottom-6 left-6 right-6 h-16 bg-white/90 backdrop-blur-lg rounded-full shadow-2xl border border-white/50 flex items-center justify-around z-40">
        <NavButton 
          icon={Calendar} 
          label="è¡Œç¨‹" 
          active={activeTab === 'itinerary'} 
          onClick={() => setActiveTab('itinerary')} 
        />
        <NavButton 
          icon={BedDouble} 
          label="ä½å®¿" 
          active={activeTab === 'hotels'} 
          onClick={() => setActiveTab('hotels')} 
        />
        <NavButton 
          icon={AlertTriangle} 
          label="æ”»ç•¥" 
          active={activeTab === 'tools'} 
          onClick={() => setActiveTab('tools')} 
        />
      </div>

    </div>
  );
}

const NavButton = ({ icon: Icon, label, active, onClick }: any) => (
  <button 
    onClick={onClick}
    className={`flex flex-col items-center justify-center w-16 h-16 transition-all duration-300 ${
      active ? '-translate-y-2' : 'text-gray-400'
    }`}
  >
    <div className={`p-2 rounded-full transition-all ${
      active ? 'bg-blue-600 text-white shadow-lg shadow-blue-600/30' : 'bg-transparent'
    }`}>
      <Icon size={20} strokeWidth={2.5} />
    </div>
    {active && (
      <span className="text-[10px] font-bold text-blue-600 mt-1 animate-fade-in">
        {label}
      </span>
    )}
  </button>
);

const getIcon = (type: string, size = 16) => {
  const props = { size, className: "opacity-70" };
  switch (type) {
    case 'flight': return <Car {...props} />; // Using Car as Plane placeholder if Plane not available, else Plane
    case 'transport': return <Car {...props} />;
    case 'hotel': return <BedDouble {...props} />;
    case 'food': return <Utensils {...props} />;
    case 'spot': return <Camera {...props} />;
    case 'activity': return <Snowflake {...props} />;
    case 'shop': return <ShoppingBag {...props} />;
    case 'warning': return <AlertTriangle {...props} className="text-red-500" />;
    default: return <MapPin {...props} />;
  }
};
