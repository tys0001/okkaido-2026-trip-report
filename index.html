<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 åŒ—æµ·é“å†¬å­£æ—…è¡Œå ±å‘Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Neutral (Beige, Brown, Soft Blue) -->
    <!-- Application Structure Plan: æ¡ç”¨é ‚éƒ¨å°èˆªæ¬„ (Tabs) æ­é…å‹•æ…‹å…§å®¹å€å¡Šã€‚å°è¦½åˆ—åŒ…å«ã€Œç¸½è¦½ã€ã€ã€Œæ¯æ—¥è¡Œç¨‹ã€(å…§å« Day 1-6 å­å°è¦½)ã€ã€Œé›ªåœ°å®‰å…¨ã€ã€ã€Œè£å‚™æ¸…å–®ã€åŠã€Œå½ˆæ€§å»ºè­°ã€ã€‚é»æ“Šå°è¦½æ¨™ç±¤æœƒé¡¯ç¤ºå°æ‡‰çš„å…§å®¹å€å¡Šä¸¦éš±è—å…¶ä»–å€å¡Šã€‚æ­¤çµæ§‹å°‡ç·šæ€§å ±å‘Šè½‰åŒ–ç‚ºä»¥ä»»å‹™ç‚ºå°Så‘çš„å·¥å…·ï¼Œä½¿ç”¨è€…å¯ç«‹å³å­˜å–æ‰€éœ€è³‡è¨Š (ä¾‹å¦‚ "ä»Šæ—¥è¡Œç¨‹" æˆ– "å®‰å…¨è¦å‰‡")ï¼Œç„¡éœ€æ»¾å‹•ç€è¦½ä¸ç›¸é—œçš„éƒ¨åˆ†ï¼Œç‰¹åˆ¥é©åˆæ—…è¡Œä¸­å³æ™‚æŸ¥é–±ã€‚ -->
    <!-- Visualization & Content Choices: 
        - æ—…è¡Œæˆå“¡ (Report Info) -> Goal: é¡¯ç¤ºçµ„æˆ -> Viz: ç”œç”œåœˆåœ– (Donut Chart) -> Interaction: æ»‘é¼ æ‡¸åœ -> Justification: è¦–è¦ºåŒ–åˆ†æï¼Œæ¯”æ–‡å­—æ›´æ˜“å¸æ”¶ -> Library: Chart.js (Canvas).
        - è¡Œç¨‹ç¸½è¦½ (Report Info) -> Goal: é«˜å±¤æ¬¡è¨ˆç•« -> Viz: 6æ¬„ç¶²æ ¼å¡ç‰‡ -> Interaction: é»æ“Šåˆ‡æ›è‡³è©²æ—¥è©³ç´°è¡Œç¨‹ -> Justification: æ˜“æ–¼æƒè¦– -> Method: HTML/Tailwind.
        - æ¯æ—¥è©³ç´°è¡Œç¨‹ (Report Info) -> Goal: é¡¯ç¤ºæ™‚ç¨‹ -> Viz: å‚ç›´æ™‚é–“è»¸æ¨£å¼åˆ—è¡¨ -> Interaction: ç„¡ (å°èˆªè‡³æ­¤å³æ˜¯äº’å‹•) -> Justification: æ¸…æ™°çš„æ™‚é–“/æ´»å‹•å±¤ç´š -> Method: HTML/Tailwind.
        - é›ªåœ°å®‰å…¨ (Report Info) -> Goal: å¼·èª¿è¦å‰‡ -> Viz: è³‡è¨Šå¡ç‰‡ (æ­é… Unicode åœ–ç¤º) -> Interaction: ç„¡ -> Justification: å°‡æ–‡å­—æ‹†åˆ†ç‚ºå¡ç‰‡ä»¥æé«˜æ˜“è®€æ€§ -> Method: HTML/Tailwind + Unicode.
        - è£å‚™æ¸…å–® (Report Info) -> Goal: äº’å‹•æ‰“åŒ…æ¸…å–® -> Viz: åˆ†çµ„åˆ—è¡¨ -> Interaction: JS é©…å‹•çš„é»æ“Šé …ç›® (åˆ‡æ›åˆªé™¤ç·šæ¨£å¼) -> Justification: å¢åŠ å¯¦ç”¨æ€§ï¼Œä½¿ç”¨è€…å¯å¯¦éš›æ“ä½œ -> Method: HTML/JS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #FDFBF7; /* Warm Beige */
        }
        .nav-tab {
            @apply px-4 py-2 text-sm font-medium text-gray-600 rounded-t-lg cursor-pointer whitespace-nowrap transition-colors duration-200;
        }
        .nav-tab.active {
            @apply bg-white text-blue-700 border-b-2 border-blue-700;
        }
        .nav-tab:not(.active):hover {
            @apply bg-gray-100 text-gray-800;
        }
        .day-tab {
            @apply px-3 py-2 text-sm font-medium text-gray-700 bg-white rounded-md cursor-pointer shadow-sm transition-all duration-200 border border-gray-200;
        }
        .day-tab.active {
            @apply bg-blue-600 text-white shadow-lg;
        }
        .day-tab:not(.active):hover {
            @apply bg-gray-50 shadow-md;
        }
        .content-section {
            @apply p-4 md:p-6 bg-white rounded-b-lg shadow-inner;
        }
        .gear-item {
            @apply p-3 bg-gray-50 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-100;
        }
        .gear-item.packed {
            @apply line-through opacity-60 bg-green-50;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 300px;
        }
        .timeline-item {
            @apply relative pl-8 sm:pl-10;
        }
        .timeline-item:before {
            content: '';
            @apply absolute left-1 top-2 w-4 h-4 bg-white border-2 border-blue-500 rounded-full z-10;
        }
        .timeline-item:after {
            content: '';
            @apply absolute left-3 top-2 w-0.5 h-full bg-blue-200;
        }
        .timeline-item:last-child:after {
            display: none;
        }

        /* Modal Styles */
        .modal-overlay {
            @apply fixed inset-0 bg-black bg-opacity-60 z-40 hidden;
        }
        .modal-container {
            @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white w-11/12 md:max-w-lg p-6 rounded-lg shadow-xl z-50 hidden;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-close-btn {
            @apply absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl;
        }
        .modal-content {
            @apply text-gray-700;
        }
        .modal-content h3 {
            @apply text-lg font-semibold text-gray-800 mb-2;
        }
        .modal-content p {
            @apply mb-2;
        }
        .modal-content ul {
            @apply list-disc list-inside mb-2;
        }
        .modal-content strong {
            @apply font-bold text-gray-900;
        }

        /* Loader */
        .loader {
            @apply w-6 h-6 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin;
        }
        
        .recommend-btn {
            @apply ml-2 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full shadow-sm hover:bg-blue-200 transition-all duration-200;
        }

    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto max-w-5xl p-4 sm:p-6 md:p-8">
        
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-gray-800">2026 åŒ—æµ·é“å†¬å­£å®¶åº­æ—…è¡Œ</h1>
            <p class="text-lg text-gray-600">æœ­å¹Œé›ªç¥­ã€æº«æ³‰åŠé“å—åœ°å€å…­æ—¥è¡Œç¨‹äº’å‹•å ±å‘Š</p>
        </header>

        <nav class="flex flex-wrap border-b border-gray-200">
            <button id="nav-overview" class="nav-tab active">ç¸½è¦½</button>
            <button id="nav-daily" class="nav-tab">æ¯æ—¥è¡Œç¨‹</button>
            <button id="nav-safety" class="nav-tab">é›ªåœ°å®‰å…¨</button>
            <button id="nav-gear" class="nav-tab">è£å‚™æ¸…å–®</button>
            <button id="nav-flex" class="nav-tab">å½ˆæ€§å»ºè­°</button>
            <button id="nav-ai" class="nav-tab">âœ¨ AI åŠ©ç†</button>
        </nav>

        <main>
            <!-- 1. ç¸½è¦½ (Overview) -->
            <section id="content-overview" class="content-section">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm">
                        <h2 class="text-xl font-semibold text-blue-800 mb-3">æ—…è¡Œæ¦‚è¦</h2>
                        <ul class="space-y-2 text-gray-700">
                            <li><strong>ğŸ“… æ—¥æœŸï¼š</strong> 2026 å¹´ 1 æœˆ 30 æ—¥ (å››) è‡³ 2 æœˆ 4 æ—¥ (äºŒ)</li>
                            <li><strong>ğŸ—» ä¸»é¡Œï¼š</strong> å†¬å­£æ…¶å…¸ã€æº«æ³‰ã€é›ªåœ°é§•é§›ã€è¦ªå­æ™¯é»</li>
                            <li><strong>ğŸ“‹ å ±å‘Šç·¨è™Ÿï¼š</strong> HOK-2026-FAM-01</li>
                        </ul>
                    </div>
                    
                    <div class="bg-green-50 p-4 rounded-lg shadow-sm">
                        <h2 class="text-xl font-semibold text-green-800 mb-3">æ—…è¡Œæˆå“¡ (å…± 4 äºº)</h2>
                        <div class="chart-container">
                            <canvas id="memberChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="mt-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">è¡Œç¨‹é€Ÿè¦½</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3">
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 1</div>
                            <div class="text-sm text-gray-600">1/30 (å››)</div>
                            <div class="mt-1 text-xs">æŠµé”æœ­å¹Œ</div>
                        </div>
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 2</div>
                            <div class="text-sm text-gray-600">1/31 (äº”)</div>
                            <div class="mt-1 text-xs">æœ­å¹Œå¸‚å€</div>
                        </div>
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 3</div>
                            <div class="text-sm text-gray-600">2/1 (å…­)</div>
                            <div class="mt-1 text-xs">æœ­å¹Œ â†’ æ´çˆºæ¹–</div>
                        </div>
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 4</div>
                            <div class="text-sm text-gray-600">2/2 (æ—¥)</div>
                            <div class="mt-1 text-xs">æ´çˆºæ¹–å‘¨é‚Š</div>
                        </div>
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 5</div>
                            <div class="text-sm text-gray-600">2/3 (ä¸€)</div>
                            <div class="mt-1 text-xs">æ´çˆºæ¹– â†’ æœ­å¹Œ</div>
                        </div>
                        <div class="day-overview-card p-3 bg-gray-100 rounded-lg shadow-sm text-center">
                            <div class="font-bold text-lg text-blue-700">Day 6</div>
                            <div class="text-sm text-gray-600">2/4 (äºŒ)</div>
                            <div class="mt-1 text-xs">æ©Ÿå ´ â†’ å•Ÿç¨‹</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. æ¯æ—¥è¡Œç¨‹ (Daily Itinerary) -->
            <section id="content-daily" class="content-section hidden">
                <nav class="flex flex-wrap gap-2 mb-6 pb-4 border-b border-gray-200">
                    <button class="day-tab active" data-day="day-1">Day 1 (1/30)</button>
                    <button class="day-tab" data-day="day-2">Day 2 (1/31)</button>
                    <button class="day-tab" data-day="day-3">Day 3 (2/1)</button>
                    <button class="day-tab" data-day="day-4">Day 4 (2/2)</button>
                    <button class="day-tab" data-day="day-5">Day 5 (2/3)</button>
                    <button class="day-tab" data-day="day-6">Day 6 (2/4)</button>
                </nav>

                <div id="day-1" class="day-content">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Day 1 (1/30 å››) â€” æŠµé”æœ­å¹Œ</h2>
                    <div class="space-y-6">
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">17:20</span>
                            <h3 class="font-semibold text-gray-800">æŠµé” æ–°åƒæ­²æ©Ÿå ´ (CTS)</h3>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">18:00</span>
                            <h3 class="font-semibold text-gray-800">äº¤é€šï¼š JR å¿«é€Ÿ Airport è™Ÿ</h3>
                            <p class="text-gray-600 text-sm">æ­ä¹˜ (ç´„ 45-50 åˆ†é˜) å‰å¾€ æœ­å¹Œç«™ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">19:15</span>
                            <h3 class="font-semibold text-gray-800">å…¥ä½ï¼š æœ­å¹Œä¸‰ä½ç¥å¤§é£¯åº—</h3>
                            <p class="text-gray-600 text-sm">è‡ªã€Œå¤§é€šç«™ã€æ­¥è¡Œ 5 åˆ†é˜ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">19:45</span>
                            <h3 class="font-semibold text-gray-800">æ™šé¤ï¼š ç‹¸å°è·¯å•†åº—è¡—
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨æœ­å¹Œç‹¸å°è·¯æˆ–è–„é‡é™„è¿‘ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„é¤å»³ï¼ˆä¾‹å¦‚æ¹¯å’–å“©æˆ–æ‹‰éºµï¼‰ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </h3>
                            <p class="text-gray-600 text-sm">æ–¼é£¯åº—é„°è¿‘å•†åœˆæˆ–è–„é‡å€åŸŸç”¨é¤ã€‚</p>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mt-4">
                            <h4 class="font-semibold text-yellow-800">ç•¶æ—¥æ³¨æ„äº‹é …</h4>
                            <ul class="list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1">
                                <li><strong>ç¦¦å¯’æº–å‚™ï¼š</strong> æŠµé”æ©Ÿå ´å¾Œï¼Œç«‹å³ç‚ºæ‰€æœ‰æˆå“¡æ›ç©¿ä¿æš–å¤–å¥—ã€å¸½å­åŠæ‰‹å¥—ã€‚</li>
                                <li><strong>äº¤é€šç¥¨åˆ¸ï¼š</strong> å»ºè­°è³¼è²·æˆ–å„²å€¼ IC å¡ (å¦‚ Kitaca / Suica)ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="day-2" class="day-content hidden">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Day 2 (1/31 äº”) â€” æœ­å¹Œå¸‚å€è§€å…‰</h2>
                    <div class="space-y-6">
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">09:30</span>
                            <h3 class="font-semibold text-gray-800">äº¤é€š & æ™¯é»ï¼š åœ“å±±å…¬åœ’ & åŒ—æµ·é“ç¥å®®</h3>
                            <p class="text-gray-600 text-sm">å¾ã€Œå¤§é€šç«™ã€æ­ä¹˜åœ°éµæ±è¥¿ç·š (3 ç«™) å‰å¾€ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">11:30</span>
                            <h3 class="font-semibold text-gray-800">æ™¯é»ï¼š åœ“å±±å‹•ç‰©åœ’</h3>
                            <p class="text-gray-600 text-sm">è§€è³å¯’å¸¶å‹•ç‰© (å†¬å­£ 16:00 é–‰åœ’)ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">15:00</span>
                            <h3 class="font-semibold text-gray-800">è³¼ç‰©ï¼š æœ­å¹Œå¸‚å€</h3>
                            <p class="text-gray-600 text-sm">PARCOã€å¤§é€šå…¬åœ’å‘¨é‚Šã€æœ­å¹Œåœ°ä¸‹è¡—ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">18:00</span>
                            <h3 class="font-semibold text-gray-800">æ™šé¤ï¼š æ¹¯å’–å“© æˆ– æˆå‰æ€æ±—çƒ¤è‚‰
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨æœ­å¹Œå¸‚å€ï¼ˆå¤§é€šå…¬åœ’æˆ–è–„é‡é™„è¿‘ï¼‰ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„æ¹¯å’–å“©æˆ–æˆå‰æ€æ±—çƒ¤è‚‰é¤å»³ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </h3>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mt-4">
                            <h4 class="font-semibold text-yellow-800">ç•¶æ—¥æ³¨æ„äº‹é …</h4>
                            <ul class="list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1">
                                <li><strong>å®‰å…¨æé†’ï¼š</strong> å…¬åœ’åŠç¥ç¤¾é›ªåœ°æ¿•æ»‘ï¼Œæ‡‰ç©¿è‘—é˜²æ°´é˜²æ»‘é›ªé´ã€‚</li>
                                <li><strong>é¤é£²å»ºè­°ï¼š</strong> ç†±é–€é¤å»³æ–¼é€±äº”æ™šé–“å»ºè­°æå‰é ç´„æˆ–ææ—©åˆ°å ´ã€‚</li>
                                <li><strong>è³¼ç‰©å»ºè­°ï¼š</strong> åœ°ä¸‹è¡— (Pole Town / Aurora Town) ä¸å—å¤©å€™å½±éŸ¿ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="day-3" class="day-content hidden">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Day 3 (2/1 å…­) â€” é›ªåœ°æ´»å‹•èˆ‡æ¹–å€ç§»å‹• (è‡ªé§•æ—¥)</h2>
                    <div class="space-y-6">
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">08:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§•ï¼š æœ­å¹Œå¸‚å€ç§Ÿè»Š</h3>
                            <p class="text-gray-600 text-sm">å»ºè­°é ç•™ 30-45 åˆ†é˜è¾¦ç†æ‰‹çºŒã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">09:15</span>
                            <h3 class="font-semibold text-gray-800">æ™¯é»ï¼š åœ‹ç‡Ÿç€§é‡éˆ´è˜­ä¸˜é™µå…¬åœ’</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 45 åˆ†é˜ã€‚é‡é»è¡Œç¨‹ï¼š é«”é©—é›ªèƒæ»‘é“ (å»ºè­° 2 å°æ™‚)ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">11:45</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§• & æ™¯é»ï¼š æ”¯ç¬æ¹–</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 45-60 åˆ†é˜ã€‚æ–¼æ¹–ç•”åˆé¤ & è§€è³ æ”¯ç¬æ¹–å†°æ¿¤ç¯€ã€‚
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨æ”¯ç¬æ¹–ç•”ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„åˆé¤é¸é …ï¼ˆä¾‹å¦‚æ™¯è§€é¤å»³æˆ–ç°¡é¤ï¼‰ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">14:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§•ï¼š å‰å¾€æ´çˆºæ¹–</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 1.5 - 2 å°æ™‚ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">16:30</span>
                            <h3 class="font-semibold text-gray-800">å…¥ä½ï¼š ä¹ƒä¹‹é¢¨åº¦å‡é£¯åº—</h3>
                            <p class="text-gray-600 text-sm">å»ºè­°æ–¼æ—¥è½å‰æŠµé”ã€‚é«”é©—é£¯åº—æº«æ³‰åŠæœƒå¸­æ–™ç†ã€‚</p>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mt-4">
                            <h4 class="font-semibold text-yellow-800">ç•¶æ—¥æ³¨æ„äº‹é …</h4>
                            <ul class="list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1">
                                <li><strong>æ™‚é–“ç®¡ç†ï¼š</strong> æ­¤æ—¥è¡Œç¨‹ç·Šæ¹Šï¼Œæ‡‰æ§åˆ¶ç€§é‡éˆ´è˜­å…¬åœ’åœç•™æ™‚é–“ï¼Œç¢ºä¿æ—¥è½å‰æŠµé”æ´çˆºæ¹–ã€‚</li>
                                <li><strong>è‡ªé§•æº–å‚™ï¼š</strong> å–è»Šæ™‚ï¼Œæ‡‰è«‹å·¥ä½œäººå“¡èªªæ˜é›ªåˆ·ã€æš–æ°£åŠ 4WD æ“ä½œæ–¹å¼ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="day-4" class="day-content hidden">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Day 4 (2/2 æ—¥) â€” é“å—æ™¯é»æ¢è¨ª (è‡ªé§•æ—¥)</h2>
                    <div class="space-y-6">
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">09:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§• & æ™¯é»ï¼š ç™»åˆ¥å°¼å…‹æ–¯æµ·æ´‹å…¬åœ’</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 50 åˆ†é˜ - 1 å°æ™‚ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">10:30</span>
                            <h3 class="font-semibold text-gray-800">é‡é»è¡Œç¨‹ï¼š è§€è³åœ‹ç‹ä¼éµéŠè¡Œ</h3>
                            <p class="text-gray-600 text-sm">æ‡‰æå‰ç¢ºèªæ™‚åˆ»è¡¨ä¸¦é ç•™ç­‰å€™æ™‚é–“ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">12:00</span>
                            <h3 class="font-semibold text-gray-800">åˆé¤ï¼š æ–¼ç™»åˆ¥åœ°å€ç”¨é¤
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨ç™»åˆ¥ï¼ˆå°¼å…‹æ–¯æµ·æ´‹å…¬åœ’æˆ–ç™»åˆ¥æº«æ³‰è¡—é™„è¿‘ï¼‰ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„åˆé¤é¤å»³ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </h3>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">13:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§• & æ™¯é»ï¼š æ˜­å’Œæ–°å±±ç†Šç‰§å ´</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 50 åˆ†é˜ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">15:00</span>
                            <h3 class="font-semibold text-gray-800">æ™¯é»ï¼š æœ‰ç å±±çºœè»Š</h3>
                            <p class="text-gray-600 text-sm">å†¬å­£ 16:00 æœ«ç­ä¸‹å±±ï¼Œè§€è³æ´çˆºæ¹–èˆ‡ç«å±±å£ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">17:30</span>
                            <h3 class="font-semibold text-gray-800">å…¥ä½ï¼š stays / å¯å¯é£¯åº—</h3>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mt-4">
                            <h4 class="font-semibold text-yellow-800">ç•¶æ—¥æ³¨æ„äº‹é …</h4>
                            <ul class="list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1">
                                <li><strong>ä¼éµéŠè¡Œï¼š</strong> è¦ªå­è¡Œç¨‹é‡é»ï¼Œå»ºè­°ææ—© 20 åˆ†é˜æŠµé”éŠè¡Œè·¯ç·šã€‚</li>
                                <li><strong>çºœè»Šç‡Ÿé‹ï¼š</strong> å¯èƒ½å› å¼·é¢¨åœé§›ï¼Œå‡ºç™¼å‰æ‡‰æŸ¥è©¢å®˜ç¶²ã€‚å±±é ‚é¢¨å¤§ï¼Œæ³¨æ„å…’ç«¥ä¿æš–ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="day-5" class="day-content hidden">
                    <h2 class="text-2xl font-bold text-blue-800 mb-4">Day 5 (2/3 ä¸€) â€” è¿”å›æœ­å¹Œèˆ‡é›ªç¥­ (è‡ªé§•æ—¥)</h2>
                    <div class="space-y-6">
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">09:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§•ï¼š é€€æˆ¿ï¼ŒåŒ—ä¸Šæœ­å¹Œ</h3>
                            <p class="text-gray-600 text-sm">è»Šç¨‹ç´„ 2 - 2.5 å°æ™‚ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">11:30</span>
                            <h3 class="font-semibold text-gray-800">è³¼ç‰©ï¼š ä¸‰äº• Outlet Park æœ­å¹ŒåŒ—å»£å³¶</h3>
                            <p class="text-gray-600 text-sm">å«åˆé¤ã€‚
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨ã€Œä¸‰äº• Outlet Park æœ­å¹ŒåŒ—å»£å³¶ã€å…§ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„åˆé¤é¸é …ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">15:30</span>
                            <h3 class="font-semibold text-gray-800">è‡ªé§•ï¼š è¿”å›æœ­å¹Œå¸‚å€ & é‚„è»Š</h3>
                            <p class="text-gray-600 text-sm">æ­¸é‚„å‰æ‡‰åŠ æ»¿æ²¹æ–™ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">16:30</span>
                            <h3 class="font-semibold text-gray-800">å…¥ä½ï¼š æ ¼æ‹‰æ–¯éº—æœ­å¹Œé£¯åº—</h3>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">17:00</span>
                            <h3 class="font-semibold text-gray-800">é‡é»è¡Œç¨‹ï¼š æœ­å¹Œé›ªç¥­</h3>
                            <p class="text-gray-600 text-sm">å¤§é€šæœƒå ´ (å¤§å‹é›ªé›•) / è–„é‡æœƒå ´ (ç²¾ç·»å†°é›•)ã€‚</p>
                        </div>
                        <div class="timeline-item">
                            <span class="absolute left-0 -translate-x-1/2 top-2 text-xs font-semibold text-gray-600 bg-gray-100 px-1.5 py-0.5 rounded-full border border-gray-300">20:00</span>
                            <h3 class="font-semibold text-gray-800">æ™šé¤ï¼š æ¹¯å’–å“© æˆ– æˆå‰æ€æ±—çƒ¤è‚‰
                                <button class="recommend-btn" data-prompt="è«‹æ¨è–¦ 3 é–“åœ¨æœ­å¹Œé›ªç¥­æœƒå ´ï¼ˆå¤§é€šæˆ–è–„é‡ï¼‰é™„è¿‘ï¼Œé©åˆå®¶åº­ï¼ˆæœ‰ 5 æ­²å’Œ 7 æ­²å°å­©ï¼‰çš„æ¹¯å’–å“©æˆ–æˆå‰æ€æ±—çƒ¤è‚‰é¤å»³ï¼Œä¸¦é™„ä¸Š 1-2 å¥æ¨è–¦ç†ç”±ã€‚">âœ¨ æ¨è–¦</button>
                            </h3>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mt-4">
                            <h4 class="font-semibold text-yellow-800">ç•¶æ—¥æ³¨æ„äº‹é …</h4>
                            <ul class="list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1">
                                <li><strong>æ™‚é–“å»ºè­°ï¼š</strong> æ–°åƒæ­²æ©Ÿå ´è¨­æ–½è±å¯Œï¼Œå»ºè­°è‡³å°‘ææ—© 3.5 å°æ™‚æŠµé”ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. é›ªåœ°å®‰å…¨ (Snow Safety) -->
            <section id="content-safety" class="content-section hidden">
                <h2 class="text-2xl font-bold text-red-700 mb-4">å†¬å­£é§•é§›å®‰å…¨è¦ç¯„</h2>
                <p class="text-gray-700 mb-6">æœ¬è¡Œç¨‹åŒ…å«ä¸‰æ—¥é›ªåœ°è‡ªé§•ï¼Œå¿…é ˆä»¥å®‰å…¨ç‚ºæœ€é«˜å‰æã€‚è«‹è©³é–±ä»¥ä¸‹è¦ç¯„ï¼š</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <h3 class="text-lg font-semibold text-red-800 mb-2">ğŸš— è»Šè¼›è¦æ ¼</h3>
                        <p class="text-gray-700">å¿…é ˆç§Ÿç”¨ <strong>4WD (å››è¼ªé©…å‹•)</strong> ä¸¦é…å‚™ <strong>é›ªèƒ (Studless Tire)</strong> ä¹‹è»Šæ¬¾ã€‚</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <h3 class="text-lg font-semibold text-red-800 mb-2">ğŸš¦ è¡Œè»Šé€Ÿåº¦èˆ‡è»Šè·</h3>
                        <p class="text-gray-700">å»ºè­°æœ€é«˜æ™‚é€Ÿ <strong>50-60 å…¬é‡Œ/å°æ™‚</strong>ã€‚å®‰å…¨è»Šè·æ‡‰ç¶­æŒç‚ºå¹³æ™‚çš„ <strong>2-3 å€</strong>ã€‚</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <h3 class="text-lg font-semibold text-red-800 mb-2">âš ï¸ æ½›åœ¨å±éšªï¼š é»‘å†° (Black Ice)</h3>
                        <p class="text-gray-700">è·¯é¢çœ‹ä¼¼æ¿•æ»‘ï¼Œå¯¦ç‚ºè–„å†°ã€‚è¡Œç¶“<strong>æ©‹æ¨‘ã€éš§é“å£ã€èƒŒé™°è™•</strong>æ™‚æ‡‰ç‰¹åˆ¥æ³¨æ„ï¼Œé¿å…æ€¥ç…è»Šæˆ–æ€¥è½‰å‘ã€‚</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <h3 class="text-lg font-semibold text-red-800 mb-2">â±ï¸ æ™‚é–“ç®¡ç†</h3>
                        <p class="text-gray-700">åŒ—æµ·é“å†¬å­£ç´„ <strong>16:00</strong> å¤©è‰²é–‹å§‹æ˜æš—ã€‚æ‡‰è¦åŠƒæ–¼æ—¥è½å‰æŠµé”ä½å®¿é»ï¼Œ<strong>é¿å…å¤œé–“é§•é§›</strong>ã€‚</p>
                    </div>
                </div>
            </section>

            <!-- 4. è£å‚™æ¸…å–® (Gear List) -->
            <section id="content-gear" class="content-section hidden">
                <h2 class="text-2xl font-bold text-green-700 mb-4">å†¬å­£é—œéµè£å‚™æ¸…å–®</h2>
                <p class="text-gray-600 mb-6">é»æ“Šé …ç›®å°‡å…¶æ¨™è¨˜ç‚ºã€Œå·²æ‰“åŒ…ã€ã€‚</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 border-b pb-1">ä¸»è¦è¡£ç‰©</h3>
                        <div class="space-y-2">
                            <div class="gear-item" data-gear-item>ğŸ§¥ é˜²æ°´é˜²é¢¨å¤–å¥— (æ»‘é›ªå¤–å¥—ç‚ºä½³)</div>
                            <div class="gear-item" data-gear-item>ğŸ§£ åˆ·æ¯› (Fleece) æˆ–è¼•ç¾½çµ¨ (ä¸­å±¤)</div>
                            <div class="gear-item" data-gear-item>ğŸ‘• ä¿æš–æ’æ±—åº•å±¤è¡£è¤² (åº•å±¤)</div>
                            <div class="gear-item" data-gear-item>ğŸ¥¾ é˜²æ°´é˜²æ»‘é«˜ç­’é›ªé´ (é—œéµ)</div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 border-b pb-1">é…ä»¶ & å…’ç«¥</h3>
                        <div class="space-y-2">
                            <div class="gear-item" data-gear-item>ğŸ§¢ æ¯›å¸½ (å¯é®è€³)</div>
                            <div class="gear-item" data-gear-item>ğŸ§¤ é˜²æ°´æ‰‹å¥—</div>
                            <div class="gear-item" data-gear-item>ğŸ§£ åœå·¾ (æˆ–è„–åœ)</div>
                            <div class="gear-item" data-gear-item>ğŸ‘¶ é€£èº«é›ªè¡£æˆ–é›ªè¤² (å…’ç«¥)</div>
                            <div class="gear-item" data-gear-item>ğŸ§¤ å‚™ç”¨æ‰‹å¥— (å…’ç«¥)</div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 border-b pb-1">é›»å­ & å…¶ä»–</h3>
                        <div class="space-y-2">
                            <div class="gear-item" data-gear-item>ğŸ”‹ è¡Œå‹•é›»æº</div>
                            <div class="gear-item" data-gear-item>ğŸ”¥ æš–æš–åŒ…</div>
                            <div class="gear-item" data-gear-item>ğŸ’³ å°ç£é§•ç…§æ­£æœ¬</div>
                            <div class="gear-item" data-gear-item>ğŸ“„ æ—¥æ–‡è­¯æœ¬</div>
                            <div class="gear-item" data-gear-item>ğŸ›‚ è­·ç…§</div>
                            <div class="gear-item" data-gear-item>ğŸ•¶ï¸ å¤ªé™½çœ¼é¡ (é˜²é›ªåœ°åå…‰)</div>
                            <div class="gear-item" data-gear-item>ğŸ§´ ä¿æ¿•ä¹³æ¶²/è­·å”‡è†</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. å½ˆæ€§å»ºè­° (Flex Options) -->
            <section id="content-flex" class="content-section hidden">
                <h2 class="text-2xl font-bold text-indigo-700 mb-4">å½ˆæ€§è¡Œç¨‹å»ºè­°</h2>
                <div class="space-y-4">
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="text-lg font-semibold text-indigo-800 mb-2">â˜ƒï¸ è¦ªå­é›ªåœ°æ´»å‹•</h3>
                        <p class="text-gray-700">æ–¼ Day 3 (æ”¯ç¬æ¹–) æˆ– Day 4 (æ´çˆºæ¹–) ç•”ï¼Œå°‹æ‰¾å®‰å…¨ç©é›ªå€åŸŸï¼Œä¿ç•™ 30-60 åˆ†é˜é€²è¡Œå †é›ªäººç­‰æ´»å‹•ã€‚å¯æ”œå¸¶ç°¡æ˜“ç©æ²™å·¥å…·ã€‚</p>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="text-lg font-semibold text-indigo-800 mb-2">ğŸ° æœ­å¹Œå¸‚å€ç”œé»é«”é©—</h3>
                        <p class="text-gray-700">æ–¼ Day 2 æˆ– Day 5ï¼Œå¯è€ƒæ…®å®‰æ’å“åšåœ¨åœ°çŸ¥åç”œé»ï¼ˆä¾‹å¦‚ï¼šKINOTOYA BAKE èµ·å¸å¡”ã€æ¤¿ã‚µãƒ­ãƒ³ èˆ’èŠ™è•¾é¬†é¤…ï¼‰ã€‚</p>
                    </div>
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="text-lg font-semibold text-indigo-800 mb-2">ä¼‘æ†©é»ï¼š é“ã®é§… (å…¬è·¯ä¼‘æ¯ç«™)</h3>
                        <p class="text-gray-700">åœ¨é•·é€”è‡ªé§•æ—¥ï¼Œå¯åˆ©ç”¨ã€Œé“ã®é§…ã€é€²è¡ŒçŸ­æš«ä¼‘æ¯ï¼Œè®“å…’ç«¥ä¸‹è»Šæ´»å‹•ï¼Œä¸¦å“åšç•¶åœ°å°åƒï¼Œä»¥ç·©è§£ä¹˜è»Šç–²å‹ã€‚</p>
                    </div>
                </div>
            </section>

            <!-- 6. AI åŠ©ç† (AI Assistant) -->
            <section id="content-ai" class="content-section hidden">
                <h2 class="text-2xl font-bold text-purple-700 mb-4">âœ¨ AI æ—…è¡ŒåŠ©ç†</h2>
                <p class="text-gray-700 mb-6">æ—…è¡Œä¸­æœ‰è‡¨æ™‚éœ€æ±‚å—ï¼Ÿè©¢å• AI åŠ©ç†ï¼(ä¾‹å¦‚ï¼šæ˜å¤©æœ­å¹Œå¤©æ°£å¦‚ä½•ï¼Ÿæˆ– å¹«æˆ‘æ‰¾ä¸€å€‹æ´çˆºæ¹–ç•”é©åˆå°å­©çš„å®¤å…§æ™¯é»)</p>
                <form id="ai-assistant-form">
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input type="text" id="ai-prompt-input" class="flex-grow p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="è«‹è¼¸å…¥æ‚¨çš„å•é¡Œ...">
                        <button type="submit" id="ai-submit-btn" class="px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 transition-all duration-200 flex items-center justify-center">
                            é€å‡º
                        </button>
                    </div>
                </form>
                <div id="ai-loading" class="hidden mt-6 flex justify-center">
                    <div class="loader"></div>
                </div>
                <div id="ai-result-container" class="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg hidden">
                    <h3 class="text-lg font-semibold text-purple-800 mb-2">AI å»ºè­°ï¼š</h3>
                    <div id="ai-result-content" class="text-gray-700"></div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>æ­¤äº’å‹•å ±å‘Šç”±åŸå§‹è³‡æ–™ç”Ÿæˆ | é ç¥æ—…é€”æ„‰å¿«</p>
        </footer>
    </div>

    <!-- Modal -->
    <div id="modal-overlay" class="modal-overlay"></div>
    <div id="modal-container" class="modal-container">
        <button id="modal-close" class="modal-close-btn">&times;</button>
        <div id="modal-content" class="modal-content">
            <!-- Content will be injected by JS -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navTabs = document.querySelectorAll('.nav-tab');
            const contentSections = document.querySelectorAll('.content-section');
            const dayTabs = document.querySelectorAll('.day-tab');
            const dayContents = document.querySelectorAll('.day-content');
            const gearItems = document.querySelectorAll('.gear-item');
            const recommendBtns = document.querySelectorAll('.recommend-btn');
            const modalOverlay = document.getElementById('modal-overlay');
            const modalContainer = document.getElementById('modal-container');
            const modalContent = document.getElementById('modal-content');
            const modalCloseBtn = document.getElementById('modal-close');
            const aiForm = document.getElementById('ai-assistant-form');
            const aiInput = document.getElementById('ai-prompt-input');
            const aiSubmitBtn = document.getElementById('ai-submit-btn');
            const aiLoading = document.getElementById('ai-loading');
            const aiResultContainer = document.getElementById('ai-result-container');
            const aiResultContent = document.getElementById('ai-result-content');

            function showSection(sectionId) {
                contentSections.forEach(section => {
                    if (section.id === sectionId) {
                        section.classList.remove('hidden');
                    } else {
                        section.classList.add('hidden');
                    }
                });

                navTabs.forEach(tab => {
                    if (tab.id === `nav-${sectionId.split('-')[1]}`) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
            }

            function showDay(dayId) {
                dayContents.forEach(day => {
                    if (day.id === dayId) {
                        day.classList.remove('hidden');
                    } else {
                        day.classList.add('hidden');
                    }
                });

                dayTabs.forEach(tab => {
                    if (tab.dataset.day === dayId) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
            }

            navTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetSection = `content-${tab.id.split('-')[1]}`;
                    showSection(targetSection);
                });
            });

            dayTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    showDay(tab.dataset.day);
                });
            });

            gearItems.forEach(item => {
                item.addEventListener('click', () => {
                    item.classList.toggle('packed');
                });
            });

            recommendBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const prompt = btn.dataset.prompt;
                    handleRestaurantRequest(prompt);
                });
            });

            aiForm.addEventListener('submit', (e) => {
                e.preventDefault();
                handleAiAssistantSubmit();
            });

            function showModal(title, content) {
                modalContent.innerHTML = `<h3>${title}</h3>${content}`;
                modalOverlay.classList.remove('hidden');
                modalContainer.classList.remove('hidden');
            }

            function hideModal() {
                modalOverlay.classList.add('hidden');
                modalContainer.classList.add('hidden');
            }

            modalOverlay.addEventListener('click', hideModal);
            modalCloseBtn.addEventListener('click', hideModal);

            function showLoading(element) {
                element.classList.remove('hidden');
            }

            function hideLoading(element) {
                element.classList.add('hidden');
            }
            
            function parseMarkdown(text) {
                return text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/\n/g, '<br>');
            }

            async function retryWithBackoff(apiCall, maxRetries = 3) {
                let attempt = 0;
                while (attempt < maxRetries) {
                    try {
                        const response = await apiCall();
                        return response;
                    } catch (error) {
                        attempt++;
                        if (attempt >= maxRetries) {
                            throw error;
                        }
                        const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }
            }
            
            async function callGeminiAPI(userQuery, systemPrompt, useGrounding = true) {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                if (useGrounding) {
                    payload.tools = [{ "google_search": {} }];
                }

                const apiCall = async () => {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API call failed with status ${response.status}`);
                    }
                    return response.json();
                };

                try {
                    const result = await retryWithBackoff(apiCall);
                    const candidate = result.candidates?.[0];
                    
                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        const text = candidate.content.parts[0].text;
                        let sources = [];
                        const groundingMetadata = candidate.groundingMetadata;

                        if (groundingMetadata && groundingMetadata.groundingAttributions) {
                            sources = groundingMetadata.groundingAttributions
                                .map(attribution => ({
                                    uri: attribution.web?.uri,
                                    title: attribution.web?.title,
                                }))
                                .filter(source => source.uri && source.title);
                        }
                        
                        let htmlResponse = parseMarkdown(text);
                        if (sources.length > 0) {
                            htmlResponse += '<h4 class="font-semibold text-sm mt-4 mb-1">åƒè€ƒä¾†æºï¼š</h4><ul class="list-disc list-inside text-sm">';
                            sources.forEach(source => {
                                htmlResponse += `<li><a href="${source.uri}" target="_blank" class="text-blue-600 hover:underline">${source.title}</a></li>`;
                            });
                            htmlResponse += '</ul>';
                        }
                        
                        return htmlResponse;

                    } else {
                        return "<p>æŠ±æ­‰ï¼Œæˆ‘ç„¡æ³•å–å¾—å›æ‡‰ã€‚è«‹ç¨å¾Œå†è©¦ã€‚</p>";
                    }
                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    return `<p>ç™¼ç”ŸéŒ¯èª¤ï¼š ${error.message}ã€‚è«‹æª¢æŸ¥æ‚¨çš„ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚</p>`;
                }
            }

            async function handleRestaurantRequest(prompt) {
                showModal("âœ¨ é¤å»³æ¨è–¦", '<div class="flex justify-center items-center"><div class="loader"></div><p class="ml-2">AI æ­£åœ¨æœå°‹æœ€ä½³æ¨è–¦...</p></div>');
                
                const systemPrompt = "ä½ æ˜¯ä¸€ä½åŒ—æµ·é“æ—…éŠå°ˆå®¶ã€‚è«‹æ ¹æ“šä½¿ç”¨è€…çš„éœ€æ±‚ï¼Œä½¿ç”¨ Google æœå°‹å·¥å…·ï¼Œæ¨è–¦çœŸå¯¦å­˜åœ¨çš„é¤å»³ã€‚è«‹ä»¥ç¹é«”ä¸­æ–‡ã€æ¢åˆ—å¼çš„æ–¹å¼ç°¡æ½”å›ç­”ã€‚";
                const responseHtml = await callGeminiAPI(prompt, systemPrompt, true);
                
                showModal("âœ¨ é¤å»³æ¨è–¦", responseHtml);
            }

            async function handleAiAssistantSubmit() {
                const userQuery = aiInput.value.trim();
                if (!userQuery) return;

                aiSubmitBtn.disabled = true;
                aiSubmitBtn.innerHTML = 'è™•ç†ä¸­...';
                showLoading(aiLoading);
                aiResultContainer.classList.add('hidden');

                const systemPrompt = "ä½ æ˜¯ä¸€ä½åŒ—æµ·é“æ—…éŠå°ˆå®¶ã€‚ä½ æ­£åœ¨å”åŠ©ä¸€å€‹å®¶åº­ï¼ˆ2 ä½æˆäººã€1 ä½ 7 æ­²ã€1 ä½ 5 æ­²ï¼‰è¦åŠƒ 2026 å¹´ 1 æœˆ 30 æ—¥è‡³ 2 æœˆ 4 æ—¥çš„åŒ—æµ·é“å†¬å­£æ—…è¡Œã€‚ä»–å€‘çš„è¡Œç¨‹åŒ…å«æœ­å¹Œã€æ´çˆºæ¹–ã€ç™»åˆ¥ã€‚è«‹æ ¹æ“šä½¿ç”¨è€…çš„å³æ™‚å•é¡Œï¼Œæä¾›ç°¡æ½”ã€å¯¦ç”¨ã€é©åˆå®¶åº­çš„å»ºè­°ã€‚ä½¿ç”¨ç¹é«”ä¸­æ–‡å›ç­”ã€‚";
                
                const responseHtml = await callGeminiAPI(userQuery, systemPrompt, true);

                aiResultContent.innerHTML = responseHtml;
                aiResultContainer.classList.remove('hidden');
                hideLoading(aiLoading);
                aiSubmitBtn.disabled = false;
                aiSubmitBtn.innerHTML = 'é€å‡º';
                aiInput.value = '';
            }

            function renderMemberChart() {
                const ctx = document.getElementById('memberChart').getContext('2d');
                if (ctx) {
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['æˆäºº (35æ­²)', 'å…’ç«¥ (7æ­² & 5æ­²)'],
                            datasets: [{
                                data: [2, 2],
                                backgroundColor: [
                                    'rgba(59, 130, 246, 0.7)',
                                    'rgba(16, 185, 129, 0.7)'
                                ],
                                borderColor: [
                                    'rgba(59, 130, 246, 1)',
                                    'rgba(16, 185, 129, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            cutout: '60%',
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        font: {
                                            family: "'Inter', 'Noto Sans TC', sans-serif",
                                            size: 12
                                        }
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            if (context.parsed !== null) {
                                                label += context.parsed + ' äºº';
                                            }
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }

            showSection('content-overview');
            showDay('day-1');
            renderMemberChart();
        });
    </script>
</body>
</html>
